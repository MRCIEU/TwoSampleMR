<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Major changes to the IEU GWAS resources for 2020 • TwoSampleMR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Major changes to the IEU GWAS resources for 2020">
<meta property="og:description" content="TwoSampleMR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TwoSampleMR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/index.html">Guide</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrcieu/TwoSampleMR">Source</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="gwas2020_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Major changes to the IEU GWAS resources for 2020</h1>
            
      
      
      <div class="hidden name"><code>gwas2020.Rmd</code></div>

    </div>

    
    
<p>This document details changes and new features specifically relating to the TwoSampleMR R package and the GWAS database behind it.</p>
<div id="what-has-changed" class="section level2">
<h2 class="hasAnchor">
<a href="#what-has-changed" class="anchor"></a>What has changed</h2>
<div id="dataset-ids" class="section level3">
<h3 class="hasAnchor">
<a href="#dataset-ids" class="anchor"></a>Dataset IDs</h3>
<p>We have made a new system for naming datasets, and all datasets are organised into data batches. Either new datasets are uploaded one at a time in which case they are added to the <code>ieu-a</code> data batch, or there is a bulk upload in which case a new batch is created. For example, <code>ukb-a</code> is a bulk upload of the first round of the Neale lab UKBiobank GWAS, and <code>ukb-b</code> is the IEU GWAS analysis of the UKBiobank data. In most cases, a dataset is then numbered arbitrarily within the batch. For example, the Locke et al 2014 BMI analysis was previously known as <code>2</code>, and it is now known as <code>ieu-a-2</code>.</p>
<p>There is backward compatibility built into the R packages that access the data, so if you use an ‘old’ ID, it will automatically translate that to the new one. But it will give you a warning, and we urge you to update your scripts to reflect this change.</p>
</div>
<div id="authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h3>
<p>Previously you would automatically be asked to authenticate any query to the database, through google. Now, we are making authentication voluntary - something that you do at the start of a session only if you need access to specific private datasets on the database. For the vast majority of use cases this is not required.</p>
<p>Another change is that the R package that managed the authentication has updated, and the file tokens generated are slightly different. For full information on how to deal with this, see here: <a href="https://mrcieu.github.io/ieugwasr/articles/guide.html#authentication" class="uri">https://mrcieu.github.io/ieugwasr/articles/guide.html#authentication</a></p>
</div>
<div id="ukbiobank-data-has-been-curated" class="section level3">
<h3 class="hasAnchor">
<a href="#ukbiobank-data-has-been-curated" class="anchor"></a>UKBiobank data has been curated</h3>
<p>We conducted a large GWAS analysis using a pipeline that systematically analysed every <a href="https://www.ncbi.nlm.nih.gov/pubmed/29040602">PHESANT</a> phenotype in UK Biobank. There were previously ~20k traits with complete GWAS data, but a majority of these were binary traits based on very few numbers of cases. We have now filtered out unreliable datasets, there are 2514 traits remaining, with any binary traits removed that had fewer than 1000 cases. Another issue is the combination of small numbers of cases and allele frequency - here minor allele count (MAC) for a particular association could be very small which would lead to high false positives when using Bolt-LMM. The remaining traits have been filtered to only retain associations where the MAC &gt; 90.</p>
<p>Document detailing this investigation here: <a href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/MRCIEU/ukbb-gwas-analysis/master/docs/ldsc_clumped_analysis.html?token=AAOV6TBQXEXEPT7SUXXLWMC6DWP3O" class="uri">https://htmlpreview.github.io/?https://raw.githubusercontent.com/MRCIEU/ukbb-gwas-analysis/master/docs/ldsc_clumped_analysis.html?token=AAOV6TBQXEXEPT7SUXXLWMC6DWP3O</a></p>
</div>
<div id="all-data-is-now-harmonised" class="section level3">
<h3 class="hasAnchor">
<a href="#all-data-is-now-harmonised" class="anchor"></a>All data is now harmonised</h3>
<p>Previously the data were QC’d to remove malformed results and then deposited as we found them. We are now also pre-harmonising all the data. This means that all alleles are coded on the forward strand, and the non-effect allele is always aligned to the human genome reference sequence B37 (so the effect allele is the non-reference allele). This does mean that sometimes variants have been removed if they did not map to the human genome, and for most datasets the effect allele has been switched for approximately half of all sites. When an effect allele changes we do of course switch the sign of the effect size, so it should not impact any MR results.</p>
</div>
<div id="ld-reference-panel-is-now-harmonised" class="section level3">
<h3 class="hasAnchor">
<a href="#ld-reference-panel-is-now-harmonised" class="anchor"></a>LD reference panel is now harmonised</h3>
<p>We have updated the LD reference panel to be harmonised against human genome build 37, and as a consequence a few variants have been lost from the version that was previously used.</p>
</div>
<div id="instrument-lists-are-up-to-date" class="section level3">
<h3 class="hasAnchor">
<a href="#instrument-lists-are-up-to-date" class="anchor"></a>Instrument lists are up-to-date</h3>
<p>Previously we were pre-clumping the tophits and storing them in the MRInstruments R package, and there was often a delay in updating the MRInstruments R package after new datasets were uploaded to the database. We have moved away from this model. Everything dataset is pre-clumped, but that is stored in the database. If you request default clumping values when extracting the tophits of a dataset, it will still be fast but it is retrieving the data from the server, and not from the MRInstruments package. You can continue to use the MRInstruments package for GWAS hits from e.g. GTEx or the EBI GWAS catalog.</p>
</div>
<div id="dbsnp-rs-ids" class="section level3">
<h3 class="hasAnchor">
<a href="#dbsnp-rs-ids" class="anchor"></a>dbSNP rs IDs</h3>
<p>All rs IDs have been mapped to dbSNP build 144. Therefore, some rs IDs may have changed, but there is stronger alignment across all datasets.</p>
</div>
<div id="everything-is-faster" class="section level3">
<h3 class="hasAnchor">
<a href="#everything-is-faster" class="anchor"></a>Everything is faster</h3>
<p>We are using Elasticsearch and Neo4j on an Oracle Cloud Infrastructure to serve the data. It’s much faster. Interestingly, it actually gets faster when more people are using it because the cache gets ‘warmed up’ by more requests.</p>
</div>
</div>
<div id="what-is-new" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-new" class="anchor"></a>What is new</h2>
<div id="browse-available-datasets-online" class="section level3">
<h3 class="hasAnchor">
<a href="#browse-available-datasets-online" class="anchor"></a>Browse available datasets online</h3>
<p>We have a new home for the GWAS summary data: <a href="https://gwas.mrcieu.ac.uk/" class="uri">https://gwas.mrcieu.ac.uk/</a>.</p>
</div>
<div id="chromosome-and-position" class="section level3">
<h3 class="hasAnchor">
<a href="#chromosome-and-position" class="anchor"></a>Chromosome and position</h3>
<p>All variants have been mapped to chromosome and position (hg19/build37). You can query based on chromosome position coordinates. This means either a list of <code>&lt;chr:pos&gt;</code> values, or a list of <code>&lt;chr:pos1-pos2&gt;</code> ranges.</p>
</div>
<div id="indels-are-retained" class="section level3">
<h3 class="hasAnchor">
<a href="#indels-are-retained" class="anchor"></a>INDELs are retained</h3>
<p>Previously we were excluding these, but they are now retained</p>
</div>
<div id="multi-allelic-variants-are-retained" class="section level3">
<h3 class="hasAnchor">
<a href="#multi-allelic-variants-are-retained" class="anchor"></a>Multi-allelic variants are retained</h3>
<p>Previously we were excluding these, but they are now retained. Be warned that if you extract a variant that has multiple alleles then you may get more than one row for that variant.</p>
</div>
<div id="more-data" class="section level3">
<h3 class="hasAnchor">
<a href="#more-data" class="anchor"></a>More data</h3>
<p>Automated download from the EBI repository, and an automated upload system and batch data processing system means that more data can be added faster to keep the database current.</p>
</div>
<div id="error-messages-are-more-informative" class="section level3">
<h3 class="hasAnchor">
<a href="#error-messages-are-more-informative" class="anchor"></a>Error messages are more informative</h3>
<p>Previously if a query to the database failed it didn’t give a reason, hopefully there is more clarity regarding what is happening now. You can also check the status of the server here: <a href="https://gwas-api.mrcieu.ac.uk/" class="uri">https://gwas-api.mrcieu.ac.uk/</a></p>
</div>
<div id="easier-programmatic-access-to-the-database" class="section level3">
<h3 class="hasAnchor">
<a href="#easier-programmatic-access-to-the-database" class="anchor"></a>Easier programmatic access to the database</h3>
<p>We are trying to make it as flexible as possible to access the data. The TwoSampleMR R package was previously the only programmatic way to access the data, now we have the following options:</p>
<ul>
<li>
<a href="https://mrcieu.github.io/ieugwasr/">ieugwasr R package</a>: All the TwoSampleMR functions that access the data are done by calling this package now. It is a simple wrapper around the API that controls access to the database.</li>
<li>
<a href="https://github.com/MRCIEU/ieugwaspy/">ieugwaspy python package</a>: Similar functionality to ieugwasr (Under construction).</li>
<li>
<a href="https://gwas-api.mrcieu.ac.uk/">API</a>: You can use the API directly, e.g. for building your own services or applications.</li>
</ul>
</div>
<div id="local-ld-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#local-ld-operations" class="anchor"></a>Local LD operations</h3>
<p>It is now possible to perform clumping, or create LD matrices, using your own local LD reference dataset. You can download the one that we have been using here: <a href="https://github.com/mrcieu/gwasglue#reference-datasets" class="uri">https://github.com/mrcieu/gwasglue#reference-datasets</a>, or create your own plink format dataset e.g. with larger samples or for different ancestries. See the LD clumping functions in the <a href="https://mrcieu.github.io/ieugwasr/">ieugwasr</a> package for more details.</p>
</div>
<div id="access-the-data-directly" class="section level3">
<h3 class="hasAnchor">
<a href="#access-the-data-directly" class="anchor"></a>Access the data directly</h3>
<p>Previously the data was only accessible through the database. Now the data can be downloaded in “GWAS VCF” format from here <a href="https://gwas.mrcieu.ac.uk/" class="uri">https://gwas.mrcieu.ac.uk/</a>. (IEU members can access all the data on RDSF or bluecrystal4 directly). This means that if you want to perform very large or numerous operations, you can do it on HPC or locally in a more performant manner by using the data files directly. Please see the <a href="https://github.com/mrcieu/gwasvcf">gwasvcf R package</a> on how to work with these data.</p>
</div>
<div id="connect-the-data-to-different-analytical-tools" class="section level3">
<h3 class="hasAnchor">
<a href="#connect-the-data-to-different-analytical-tools" class="anchor"></a>Connect the data to different analytical tools</h3>
<p>Either the data in the database, or the GWAS VCF files, can be queried and the results translated into the formats for a bunch of different R packages for MR, colocalisation, fine mapping, etc. Have a look at the <a href="https://github.com/mrcieu/gwasglue">gwasglue R package</a>, to see what is available and how to do this. It’s still under construction, but feel free to try it, make suggestions, and contribute code.</p>
</div>
</div>
<div id="key-links" class="section level2">
<h2 class="hasAnchor">
<a href="#key-links" class="anchor"></a>Key links</h2>
<ul>
<li>The IEU GWAS database: <a href="https://gwas.mrcieu.ac.uk" class="uri">https://gwas.mrcieu.ac.uk</a>
</li>
<li>API to the IEU GWAS database: <a href="https://gwas-api.mrcieu.ac.uk" class="uri">https://gwas-api.mrcieu.ac.uk</a>
</li>
<li>Updated TwoSampleMR package branch (not merged to master yet): <a href="https://github.com/MRCIEU/TwoSampleMR/tree/ieugwasr" class="uri">https://github.com/MRCIEU/TwoSampleMR/tree/ieugwasr</a>
</li>
<li>ieugwasr package, for R access to the API: <a href="https://mrcieu.github.io/ieugwasr/" class="uri">https://mrcieu.github.io/ieugwasr/</a>
</li>
<li>ieugwaspy package, for python access to the API: <a href="https://github.com/MRCIEU/ieugwaspy/" class="uri">https://github.com/MRCIEU/ieugwaspy/</a> (Under construction)</li>
<li>gwasvcf package, R interface to GWAS VCF files: <a href="https://mrcieu.github.io/gwasvcf/" class="uri">https://mrcieu.github.io/gwasvcf/</a>
</li>
<li>pygwasvcf package, python interface to GWAS VCF files: <a href="https://github.com/mrcieu/pygwasvcf" class="uri">https://github.com/mrcieu/pygwasvcf</a> (Under construction)</li>
<li>gwasglue package, linking GWAS data to various analytical methods: <a href="https://mrcieu.github.io/gwasglue/" class="uri">https://mrcieu.github.io/gwasglue/</a> (Functional, under construction)</li>
<li>gwas2vcf online tool, allowing users to create GWAS VCF files from summary data: <a href="https://github.com/MRCIEU/gwas2vcf" class="uri">https://github.com/MRCIEU/gwas2vcf</a>
</li>
</ul>
</div>
<div id="how-to-request-new-data" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-request-new-data" class="anchor"></a>How to request new data</h2>
<p>We have setup a github issues page here: <a href="https://github.com/MRCIEU/igd-data-requests/issues" class="uri">https://github.com/MRCIEU/igd-data-requests/issues</a></p>
<p>Please visit here to make a log of new data requests, or to contribute new data.</p>
</div>
<div id="backwards-compatibility" class="section level2">
<h2 class="hasAnchor">
<a href="#backwards-compatibility" class="anchor"></a>Backwards compatibility</h2>
<p>To install the new version of TwoSampleMR, perform as normal:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("devtools")
devtools::install_github("MRCIEU/TwoSampleMR")</a></code></pre>
<p>To update the package just run the <code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github("MRCIEU/TwoSampleMR")</a></code> command again.</p>
<p>We recommend using this new version going forwards but for a limited time we are enabling backwards compatibility, in case you are in the middle of analysis or need to reproduce old analysis. In order to use the legacy version of the package and the database, install using:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("devtools")
devtools::install_github("MRCIEU/TwoSampleMR@0.4.26")</a></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gibran Hemani, Philip Haycock, Jie Zheng, Tom Gaunt, Ben Elsworth, Tom Palmer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
